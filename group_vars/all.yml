users_groups:
  - name: www-data
    system: true
users:
  - name: "{{ merchantly_user }}"
    group: www-data
    auth_key: "{{ merchantly_user_auth_keys | default([]) }}"

nvm_env: user
nvm_users:
  - "{{ merchantly_user }}"
nvm_default_node_version: v8.9.4
nvm_node_versions:
  - "{{ nvm_default_node_version }}"
nvm_root: "$HOME/.nvm"

es_major_version: '5.x'
es_version: "5.6.12"
es_instance_name: "{{ ansible_hostname }}"
es_enable_xpack: false
es_plugins:
  - plugin: "http://dl.bintray.com/content/imotov/elasticsearch-plugins/org/elasticsearch/elasticsearch-analysis-morphology/{{ es_version }}/elasticsearch-analysis-morphology-{{ es_version }}.zip"

postgresql_version: 9.6
postgresql_encoding: 'UTF-8'
postgresql_locale: 'en_US.UTF-8'
postgresql_ctype: 'en_US.UTF-8'
postgresql_admin_user: "postgres"
postgresql_default_auth_method: "trust"
postgresql_users:
  - name: '{{ merchantly_db_user }}'
    pass: '{{ merchantly_db_password }}'
    encrypted: no
postgresql_databases:
  - name:   '{{ merchantly_db_name }}'
    owner: postgres
postgresql_user_privileges:
  - name: '{{ merchantly_db_user }}'
    db:   '{{ merchantly_db_name }}'
    priv: "ALL"
postgresql_database_extensions:
  - db: "{{ merchantly_db_name }}"
    extensions:
      - btree_gin
      - hstore
      - intarray
      - pg_buffercache
      - pg_stat_statements
      - pg_trgm
      - plpgsql
      - uuid-ossp
postgresql_service_enabled: false
postgresql_listen_addresses: '127.0.0.1'
postgresql_pg_hba_default:
  - type: local
    database: all
    user: '{{ postgresql_admin_user }}'
    address: ''
    method: '{{ postgresql_default_auth_method }}'
    comment: ''
  - type: local
    database: all
    user: all
    address: ''
    method: '{{ postgresql_default_auth_method }}'
    comment: '"local" is for Unix domain socket connections only'
  - type: host
    database: all
    user: all
    address: '127.0.0.1/32'
    method: '{{ postgresql_default_auth_method }}'
    comment: 'IPv4 local connections:'
  - type: host
    database: all
    user: all
    address: '::1/128'
    method: '{{ postgresql_default_auth_method }}'
    comment: 'IPv6 local connections:'
postgresql_max_connections: 250
postgresql_max_memory: "{{ merchantly_db_max_memory | default(ansible_memtotal_mb / 4) }}"
postgresql_shared_buffers: "{{ postgresql_max_memory / 4 }}MB"
postgresql_work_mem: "{{ postgresql_max_memory }}KB"
postgresql_effective_cache_size: "{{ postgresql_max_memory / 16 }}MB"
postgresql_min_wal_size: 1024MB
postgresql_max_wal_size: 2048MB
postgresql_wal_buffers: 16MB
postgresql_maintenance_work_mem: 128MB
postgresql_checkpoint_completion_target: 0.7
postgresql_default_statistics_target: 100
