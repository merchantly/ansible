- hosts: elastic
  roles:
    #- nginx
    - elasticsearch
    - elastic-hq
  vars:
    # generated by : htpasswd -nb foo demo
    hq_auth: "{{ lookup('env','HQ_AUTH') }}"

    es_version: "5.5.2"
    es_instance_name: "node1"
    es_config:
      # network.host: "{{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'] }}" # '136.243.75.106' # db2.kiiiosk.ru
      network.host: 127.0.0.1
      # network.bind_host: 0.0.0.0
      # network.publish_host: 136.243.75.79
      discovery.zen.ping.unicast.hosts: "localhost:9300"
      http.port: 9200
      transport.tcp.port: 9300
    es_plugins:
      - plugin: http://dl.bintray.com/content/imotov/elasticsearch-plugins/org/elasticsearch/elasticsearch-analysis-morphology/5.5.2/elasticsearch-analysis-morphology-5.5.2.zip



# TODO
# write content CONF_DIR=/etc/elasticsearch/node1/ into /etc/default/elasticsearch
