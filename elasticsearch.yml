- hosts: elastic
  roles:
    - role: elastic.elasticsearch
      es_major_version: '5.x'
      es_version: "5.6.12"
      es_instance_name: "node1"
      es_api_basic_auth_username: 'kiiiosk'
      es_api_basic_auth_password: 'kiiioskpassword'
      es_plugins:
        - plugin: "http://dl.bintray.com/content/imotov/elasticsearch-plugins/org/elasticsearch/elasticsearch-analysis-morphology/{{ es_version }}/elasticsearch-analysis-morphology-{{ es_version }}.zip"


      #roles:
        ##- nginx
        #- elasticsearch
      #vars:
        ## generated by : htpasswd -nb foo demo
        ## hq_auth: "{{ lookup('env','HQ_AUTH') }}"

        #es_instance_name: "node1"
        #es_config:
          #network.host: 127.0.0.1
          ## network.host: "{{ hostvars[inventory_hostname]['ansible_default_ipv4']['address'] }}" # '136.243.75.106' # db2.kiiiosk.ru
          ## network.bind_host: 0.0.0.0
          ## network.publish_host: 136.243.75.79
          #discovery.zen.ping.unicast.hosts: "localhost:9300"
          #http.port: 9200
          #transport.tcp.port: 9300

# TODO
# write content CONF_DIR=/etc/elasticsearch/node1/ into /etc/default/elasticsearch
